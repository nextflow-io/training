// Project defaults
params {
    samples = 'data/samples.csv'
    outdir = 'results'
}

// Process defaults
process {
    cpus = 2
    memory = '4.GB'
    time = '2.h'

    // Override for specific processes
    withName: 'SPADES' {
        cpus = 8
        memory = '16.GB'
        time = '6.h'
    }
}

// Container settings - disabled by default for mock processes
// Enable when using real bioinformatics tools
docker.enabled = false

// Generate execution reports
timeline {
    enabled = true
    file = "${params.outdir}/timeline.html"
}

report {
    enabled = true
    file = "${params.outdir}/report.html"
}

trace {
    enabled = true
    file = "${params.outdir}/trace.txt"
}

// Profiles for different execution environments
profiles {

    // Default: mock processes without containers (for learning)
    standard {
        process.executor = 'local'
        docker.enabled = false
    }

    // Use real bioinformatics tools with Docker containers
    docker {
        docker.enabled = true
        process {
            withName: 'FASTQC' { container = 'biocontainers/fastqc:0.12.1' }
            withName: 'FASTP' { container = 'biocontainers/fastp:0.23.4' }
            withName: 'SPADES' { container = 'biocontainers/spades:3.15.5' }
            withName: 'QUAST' { container = 'biocontainers/quast:5.2.0' }
        }
    }

    // HPC cluster with Singularity
    cluster {
        process.executor = 'slurm'
        process.queue = 'general'
        process.clusterOptions = '--account=myproject'
        singularity.enabled = true
        singularity.cacheDir = '/shared/containers'
        docker.enabled = false
    }

    // Cloud execution (AWS Batch)
    cloud {
        process.executor = 'awsbatch'
        process.queue = 'genomics-queue'
        workDir = 's3://my-bucket/work'
        aws.region = 'us-east-1'
    }

    // Minimal resources for testing
    test {
        params.samples = 'data/samples.csv'
        process.cpus = 1
        process.memory = '2.GB'
    }
}
