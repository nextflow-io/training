/*
 * Amazon EKS execution configuration
 * NOTE: This is an example configuration - you need an EKS cluster
 * with shared storage (EFS) set up to actually use this.
 */

// Enable Kubernetes executor
process {
    executor = 'k8s'

    // Container is required for Kubernetes
    container = 'ubuntu:22.04'

    // Resource labels for different process types
    withLabel: 'small' {
        cpus = 2
        memory = '4.GB'
    }

    withLabel: 'large' {
        cpus = 8
        memory = '32.GB'
    }
}

// Kubernetes configuration
k8s {
    // Namespace where pods will run
    namespace = 'nextflow'

    // Service account with appropriate RBAC permissions
    serviceAccount = 'nextflow-sa'

    // Persistent Volume Claim for shared storage (e.g., backed by EFS)
    storageClaimName = 'nextflow-pvc'

    // Mount path for the shared storage
    storageMountPath = '/workspace'
}

// Work directory on the shared filesystem
workDir = '/workspace/work'
