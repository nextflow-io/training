
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://training.nextflow.io/0.dev/archive/advanced/grouping/" rel="canonical"/>
<link href="../metadata/" rel="prev"/>
<link href="../groovy/" rel="next"/>
<link href="../../../assets/img/nextflow-icon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.22" name="generator"/>
<title>Grouping and Splitting - training.nextflow.io</title>
<link href="../../../assets/stylesheets/main.84d31ad4.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/stylesheets/fonts.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-244N3GEN75"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-244N3GEN75",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-244N3GEN75",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
<script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="slate" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#grouping-and-splitting">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
<aside class="md-banner">
<div class="md-banner__inner md-grid md-typeset">
<div style="text-align: center">
  Nextflow Training Week (2025-Q1):
  <strong>March 10-14, 2025</strong>
<a class="md-button" href="https://community.seqera.io/t/nextflow-training-week-2025-q1/1775/6" target="_blank">
    More info
    <span class="twemoji"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg></span>
</a>
</div>
<style type="text/css">
  .md-banner {
    display: none;
  }
</style>
<script>
  (function () {
    function hideAnnouncement() {
      var announcementDate = new Date(
        "2025-03-15T00:00:00Z",
      );
      var currentDate = new Date();
      var banner = document.querySelector(".md-banner");
      if (banner && currentDate <= announcementDate) {
        banner.style.display = "block";
      }
    }

    // Run on initial load
    hideAnnouncement();

    // Hook into XHR to run after each page update
    var originalOpen = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function () {
      this.addEventListener("load", function () {
        setTimeout(hideAnnouncement, 0); // Ensure it runs after the request completes
      });
      return originalOpen.apply(this, arguments);
    };
  })();
</script>
</div>
</aside>
</div>
<div data-md-color-scheme="default" data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="training.nextflow.io" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="training.nextflow.io">
<img alt="logo" src="../../../assets/img/nextflow_logo_dark.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            training.nextflow.io
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Grouping and Splitting
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"></path></svg>
</label>
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<div class="md-header__option">
<div class="md-select">
<button aria-label="Select language" class="md-header__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"></path></svg>
</button>
<div class="md-select__inner">
<ul class="md-select__list">
<li class="md-select__item">
<a class="md-select__link" href="./" hreflang="en">
              English
            </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="../../../pt/archive/advanced/grouping/" hreflang="pt">
              Português
            </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="../../../es/archive/advanced/grouping/" hreflang="es">
              Español
            </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="../../../fr/archive/advanced/grouping/" hreflang="fr">
              Français
            </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="../../../it/archive/advanced/grouping/" hreflang="it">
              Italiano
            </a>
</li>
<li class="md-select__item">
<a class="md-select__link" href="../../../ko/archive/advanced/grouping/" hreflang="ko">
              Korean
            </a>
</li>
</ul>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/nextflow-io/training" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    nextflow-io/training
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="training.nextflow.io" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="training.nextflow.io">
<img alt="logo" src="../../../assets/img/nextflow_logo_dark.png"/>
</a>
    training.nextflow.io
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/nextflow-io/training" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    nextflow-io/training
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Home
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Environment setup
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Environment setup
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../envsetup/">
<span class="md-ellipsis">
    Environment Setup
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../envsetup/01_setup/">
<span class="md-ellipsis">
    GitHub Codespaces
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../envsetup/02_local/">
<span class="md-ellipsis">
    Local installation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../envsetup/03_devcontainer/">
<span class="md-ellipsis">
    Local installation using VSCode Devcontainers extension
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    Nextflow Run
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Nextflow Run
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nextflow_run/">
<span class="md-ellipsis">
    Nextflow Run
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nextflow_run/00_orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nextflow_run/01_basics/">
<span class="md-ellipsis">
    Part 1: Run basic operations
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nextflow_run/02_pipeline/">
<span class="md-ellipsis">
    Part 2: Run pipelines
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nextflow_run/03_config/">
<span class="md-ellipsis">
    Part 3: Configuration
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
<span class="md-ellipsis">
    Hello Nextflow
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Hello Nextflow
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/">
<span class="md-ellipsis">
    Hello Nextflow
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/00_orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/01_hello_world/">
<span class="md-ellipsis">
    Part 1: Hello World
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/02_hello_channels/">
<span class="md-ellipsis">
    Part 2: Hello Channels
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/03_hello_workflow/">
<span class="md-ellipsis">
    Part 3: Hello Workflow
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/04_hello_modules/">
<span class="md-ellipsis">
    Part 4: Hello Modules
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/05_hello_containers/">
<span class="md-ellipsis">
    Part 5: Hello Containers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/06_hello_config/">
<span class="md-ellipsis">
    Part 6: Hello Config
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/survey/">
<span class="md-ellipsis">
    Feedback survey
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nextflow/next_steps/">
<span class="md-ellipsis">
    Next Steps
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Hello nf-core
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Hello nf-core
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nf-core/">
<span class="md-ellipsis">
    Hello nf-core
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nf-core/00_orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nf-core/01_run_demo/">
<span class="md-ellipsis">
    Part 1: Run a demo pipeline
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nf-core/02_rewrite_hello/">
<span class="md-ellipsis">
    Part 2: Rewrite Hello for nf-core
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nf-core/survey/">
<span class="md-ellipsis">
    Feedback survey
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../hello_nf-core/next_steps/">
<span class="md-ellipsis">
    Next Steps
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    Nextflow for Science
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Nextflow for Science
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/">
<span class="md-ellipsis">
    Nextflow for Science
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
<span class="md-ellipsis">
    Genomics
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_2">
<span class="md-nav__icon md-icon"></span>
            Genomics
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/">
<span class="md-ellipsis">
    Nextflow for Genomics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/00_orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/01_per_sample_variant_calling/">
<span class="md-ellipsis">
    Part 1: Per-sample variant calling
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/02_joint_calling/">
<span class="md-ellipsis">
    Part 2: Joint calling on a cohort
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/03_modules/">
<span class="md-ellipsis">
    Part 3: Moving code into modules
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/04_testing/">
<span class="md-ellipsis">
    Part 4: Adding tests
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/survey/">
<span class="md-ellipsis">
    Feedback survey
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/genomics/next_steps/">
<span class="md-ellipsis">
    Next Steps
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
<span class="md-ellipsis">
    RNAseq
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_6_3">
<span class="md-nav__icon md-icon"></span>
            RNAseq
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/rnaseq/">
<span class="md-ellipsis">
    Nextflow for RNAseq
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/rnaseq/00_orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/rnaseq/01_method/">
<span class="md-ellipsis">
    Part 1: Method overview and manual testing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/rnaseq/02_single-sample/">
<span class="md-ellipsis">
    Part 2: Single-sample implementation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/rnaseq/03_multi-sample/">
<span class="md-ellipsis">
    Part 3: Multi-sample paired-end implementation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/rnaseq/survey/">
<span class="md-ellipsis">
    Feedback survey
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../nf4_science/rnaseq/next_steps/">
<span class="md-ellipsis">
    Next Steps
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    Training Collections
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Training Collections
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../training_collections/">
<span class="md-ellipsis">
    Training Collections
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../training_collections/architects_toolkit_1/">
<span class="md-ellipsis">
    The Architect's Toolkit I
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    Side Quests
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            Side Quests
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/">
<span class="md-ellipsis">
    Side Quests
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/dev_environment/">
<span class="md-ellipsis">
    Development Environment
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/metadata/">
<span class="md-ellipsis">
    Metadata in workflows
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/working_with_files/">
<span class="md-ellipsis">
    Working with Files
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/splitting_and_grouping/">
<span class="md-ellipsis">
    Splitting and Grouping
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/workflows_of_workflows/">
<span class="md-ellipsis">
    Workflows of Workflows
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/debugging/">
<span class="md-ellipsis">
    Debugging Workflows
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/essential_scripting_patterns/">
<span class="md-ellipsis">
    Essential Nextflow Scripting Patterns
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/nf-test/">
<span class="md-ellipsis">
    Testing with nf-test
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../side_quests/nf-core/">
<span class="md-ellipsis">
    Introduction to nf-core
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    Archive
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            Archive
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
<span class="md-ellipsis">
    Fundamentals Training
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_1">
<span class="md-nav__icon md-icon"></span>
            Fundamentals Training
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/">
<span class="md-ellipsis">
    Fundamentals Training
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/intro/">
<span class="md-ellipsis">
    Basic concepts
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/rnaseq_pipeline/">
<span class="md-ellipsis">
    Simple RNA-Seq workflow
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/containers/">
<span class="md-ellipsis">
    Dependencies and containers
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/channels/">
<span class="md-ellipsis">
    Channels
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/processes/">
<span class="md-ellipsis">
    Processes
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/operators/">
<span class="md-ellipsis">
    Operators
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/groovy/">
<span class="md-ellipsis">
    Groovy introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/modules/">
<span class="md-ellipsis">
    Modularization
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/config/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/executors/">
<span class="md-ellipsis">
    Deployment scenarios
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/seqera_platform/">
<span class="md-ellipsis">
    Seqera Platform
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/cache_and_resume/">
<span class="md-ellipsis">
    Cache and resume
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic_training/debugging/">
<span class="md-ellipsis">
    Troubleshooting
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_9_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
<span class="md-ellipsis">
    Advanced Training
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_9_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_9_2">
<span class="md-nav__icon md-icon"></span>
            Advanced Training
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    Advanced Training
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../orientation/">
<span class="md-ellipsis">
    Orientation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../operators/">
<span class="md-ellipsis">
    Operator Tour
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../metadata/">
<span class="md-ellipsis">
    Metadata Propagation
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Grouping and Splitting
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Grouping and Splitting
    
  </span>
</a>
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
    On this page
  </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#grouping-using-submap">
<span class="md-ellipsis">
      Grouping using subMap
    </span>
</a>
</li> <li class="md-nav__item">
<a class="md-nav__link" href="#passing-maps-through-processes">
<span class="md-ellipsis">
      Passing maps through processes
    </span>
</a>
</li> <li class="md-nav__item">
<a class="md-nav__link" href="#fanning-out-over-intervals">
<span class="md-ellipsis">
      Fanning out over intervals
    </span>
</a>
</li> <li class="md-nav__item">
<a class="md-nav__link" href="#publishing-the-bams">
<span class="md-ellipsis">
      Publishing the bams
    </span>
</a>
</li>
</ul>
</nav>
<nav aria-label="Resources" class="md-nav md-nav--secondary sidebar_resources">
<label class="md-nav__title">Resources</label>
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="https://nextflow.io/docs/latest/index.html" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M17.5 14.33c.79 0 1.63.08 2.5.24v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.33-4.5.99v-1.69c1.17-.53 2.67-.8 4.5-.8M13 12.46c1.29-.53 2.79-.79 4.5-.79.79 0 1.63.07 2.5.23v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.34-4.5.99m4.5-3.65c-1.9 0-3.39.32-4.5 1V9.84c1.23-.56 2.73-.84 4.5-.84.79 0 1.63.08 2.5.23v1.55c-.74-.19-1.59-.28-2.5-.28m3.5 8V7c-1.04-.33-2.21-.5-3.5-.5-2.05 0-3.88.5-5.5 1.5v11.5c1.62-1 3.45-1.5 5.5-1.5 1.19 0 2.36.16 3.5.5m-3.5-14c2.35 0 4.19.5 5.5 1.5v14.56c0 .12-.05.24-.16.35-.11.09-.23.17-.34.17-.11 0-.19-.02-.25-.05-1.28-.69-2.87-1.03-4.75-1.03-2.05 0-3.88.5-5.5 1.5-1.34-1-3.17-1.5-5.5-1.5-1.66 0-3.25.36-4.75 1.07-.03.01-.07.01-.12.03-.04.01-.08.02-.13.02-.11 0-.23-.04-.34-.12a.475.475 0 0 1-.16-.35V6c1.34-1 3.18-1.5 5.5-1.5 2.33 0 4.16.5 5.5 1.5 1.34-1 3.17-1.5 5.5-1.5Z"></path>
</svg>
        Nextflow Docs
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://www.nextflow.io/slack-invite.html" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M6 15a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2h2v2m1 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-5m2-8a2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2v2H9m0 1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5m8 2a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2h-2v-2m-1 0a2 2 0 0 1-2 2 2 2 0 0 1-2-2V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5m-2 8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2h2m0-1a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-5Z"></path>
</svg>
        Nextflow Slack
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://nextflow.io/" rel="noopener" target="_blank">
<svg id="Layer_1" version="1.1" viewbox="80 50 350 350" xmlns="http://www.w3.org/2000/svg">
<style type="text/css">
            .st0 {
              fill: "gray";
            }
          </style>
<path class="st0" d="M124.5,171.5c39.4,2.6,71.1,34.3,73.5,73.8h46.1c-2.6-65-54.7-117.2-119.6-119.9V171.5z"></path>
<path class="st0" d="M198.3,255.8c-2.6,39.5-34.3,71.1-73.8,73.5v46.1c65-2.6,117.2-54.7,119.9-119.6H198.3z"></path>
<path class="st0" d="M300.7,245c2.6-39.5,34.3-71.1,73.8-73.5v-46.1c-65,2.6-117.2,54.7-119.9,119.6H300.7z"></path>
<path class="st0" d="M374.5,329.3c-39.4-2.6-71.1-34.3-73.5-73.8h-46.1c2.6,65,54.7,117.2,119.6,119.9V329.3z"></path>
</svg>
        Nextflow Homepage
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://seqera.io/" rel="noopener" target="_blank">
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.3.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg id="Layer_1" style="enable-background: new 0 0 500 500" version="1.1" viewbox="80 50 350 350" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px">
<style type="text/css">
            .st0 {
              clip-path: url(#SVGID_00000006699037935518914080000000086571810102047141_);
            }
            .st1 {
              fill: "gray";
            }
          </style>
<g>
<defs>
<rect height="250" id="SVGID_1_" width="250" x="125" y="125"></rect>
</defs>
<clippath id="SVGID_00000183214694142566821210000012389151436317298101_">
<use style="overflow: visible" xlink:href="#SVGID_1_"></use>
</clippath>
<g style="
                clip-path: url(#SVGID_00000183214694142566821210000012389151436317298101_);
              ">
<path class="st1" d="M375,333l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.2-0.9l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7L365,308l-0.6-0.6l-0.6-0.6l-0.6-0.6l-0.6-0.6L362,305
                      l-0.6-0.6l-0.7-0.6l-0.6-0.5l-1.2,0.7l-0.8,0.5l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.9,0.4l-0.9,0.4l-0.9,0.3l-0.9,0.3
                      l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0.1
                      l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0l-0.9,0h-57.5l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.3l0.1,0.3l0.1,0.4l0.1,0.4
                      l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4l-0.1,0.3l-0.2,0.3l-0.2,0.3
                      l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.1l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0H125V375h209.7l0.9,0l0.9,0l0.9,0l0.8-0.1
                      l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3
                      l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7
                      l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8
                      l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0-0.9l0-0.9l0-0.8L375,333z"></path>
<path class="st1" d="M375,260.4l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.1-0.8l-0.1-0.8l-0.2-0.8l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.7
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.2-0.2h0h-89.8l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.4l0.1,0.3
                      l0.1,0.4l0.1,0.4l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4
                      l-0.2,0.4l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0h-82.5h-111H125v32.2
                      h122.8h86.9h0.9l0.9,0l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3
                      l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.4l0.8-0.4l0.2-0.1l0.6-0.3l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.5-0.7l0.5-0.7l0.5-0.7
                      l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7l0.4-0.7l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8
                      l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0-0.8l0-0.9l0-0.9
                      L375,260.4z"></path>
<path class="st1" d="M165.3,197.6l-0.9,0l-0.8,0l-0.9,0l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.2,0.1l-0.6,0.3l-0.8,0.4
                      l-0.8,0.4l-0.8,0.4l-0.7,0.4l-0.7,0.5l-0.7,0.5L142,205l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.8l0,0.9l0.1,0.8l0.1,0.8
                      l0.1,0.9l0.1,0.9l0.1,0.8l0.2,0.9l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.2,0.2h89.8l-59.7-16.4l-0.4-0.1l-0.3-0.1
                      l-0.4-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3
                      l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4
                      l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3
                      l0.3-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.4-0.2l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0
                      h0.4h82.5h111H375v-32.3H252.2H165.3z"></path>
<path class="st1" d="M165.3,125l-0.9,0l-0.8,0l-0.9,0.1l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4
                      l-0.8,0.4l-0.7,0.5l-0.7,0.4l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.9l0,0.8l0.1,0.9l0.1,0.9
                      l0.1,0.8l0.1,0.8l0.1,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.6,0.6l0.6,0.6
                      l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.7,0.6l0.6,0.5h0l1.1-0.7l0.8-0.5l0.8-0.5l0.8-0.4l0.8-0.4l0.9-0.4l0.9-0.4l0.9-0.4
                      l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.1l0.9-0.1l0.9-0.1l0.9-0.1
                      l0.9-0.1l0.9-0.1l0.9,0l0.9,0l0.9,0h57.5l-59.7-16.4l-0.4-0.1l-0.3-0.1l-0.4-0.1l-0.3-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2
                      l-0.3-0.2l-0.3-0.2l-0.3-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.3l-0.1-0.4
                      l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3
                      l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2
                      l0.3-0.2l0.4-0.1l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0l0.4,0H375V125H165.3z"></path>
</g>
</g>
</svg>
        Seqera
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://github.com/nextflow-io/training" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"></path>
</svg>
        Training on GitHub
      </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../groovy/">
<span class="md-ellipsis">
    Groovy Imports
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../structure/">
<span class="md-ellipsis">
    Workflow Structure
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/">
<span class="md-ellipsis">
    Configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../summary/">
<span class="md-ellipsis">
    Summary
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../support/">
<span class="md-ellipsis">
    Support
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../help/">
<span class="md-ellipsis">
    Help
    
  </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="On this page" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
    On this page
  </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#grouping-using-submap">
<span class="md-ellipsis">
      Grouping using subMap
    </span>
</a>
</li> <li class="md-nav__item">
<a class="md-nav__link" href="#passing-maps-through-processes">
<span class="md-ellipsis">
      Passing maps through processes
    </span>
</a>
</li> <li class="md-nav__item">
<a class="md-nav__link" href="#fanning-out-over-intervals">
<span class="md-ellipsis">
      Fanning out over intervals
    </span>
</a>
</li> <li class="md-nav__item">
<a class="md-nav__link" href="#publishing-the-bams">
<span class="md-ellipsis">
      Publishing the bams
    </span>
</a>
</li>
</ul>
</nav>
<nav aria-label="Resources" class="md-nav md-nav--secondary sidebar_resources">
<label class="md-nav__title">Resources</label>
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="https://nextflow.io/docs/latest/index.html" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M17.5 14.33c.79 0 1.63.08 2.5.24v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.33-4.5.99v-1.69c1.17-.53 2.67-.8 4.5-.8M13 12.46c1.29-.53 2.79-.79 4.5-.79.79 0 1.63.07 2.5.23v1.5c-.62-.16-1.46-.24-2.5-.24-1.9 0-3.39.34-4.5.99m4.5-3.65c-1.9 0-3.39.32-4.5 1V9.84c1.23-.56 2.73-.84 4.5-.84.79 0 1.63.08 2.5.23v1.55c-.74-.19-1.59-.28-2.5-.28m3.5 8V7c-1.04-.33-2.21-.5-3.5-.5-2.05 0-3.88.5-5.5 1.5v11.5c1.62-1 3.45-1.5 5.5-1.5 1.19 0 2.36.16 3.5.5m-3.5-14c2.35 0 4.19.5 5.5 1.5v14.56c0 .12-.05.24-.16.35-.11.09-.23.17-.34.17-.11 0-.19-.02-.25-.05-1.28-.69-2.87-1.03-4.75-1.03-2.05 0-3.88.5-5.5 1.5-1.34-1-3.17-1.5-5.5-1.5-1.66 0-3.25.36-4.75 1.07-.03.01-.07.01-.12.03-.04.01-.08.02-.13.02-.11 0-.23-.04-.34-.12a.475.475 0 0 1-.16-.35V6c1.34-1 3.18-1.5 5.5-1.5 2.33 0 4.16.5 5.5 1.5 1.34-1 3.17-1.5 5.5-1.5Z"></path>
</svg>
        Nextflow Docs
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://www.nextflow.io/slack-invite.html" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M6 15a2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2h2v2m1 0a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-5m2-8a2 2 0 0 1-2-2 2 2 0 0 1 2-2 2 2 0 0 1 2 2v2H9m0 1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H4a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5m8 2a2 2 0 0 1 2-2 2 2 0 0 1 2 2 2 2 0 0 1-2 2h-2v-2m-1 0a2 2 0 0 1-2 2 2 2 0 0 1-2-2V5a2 2 0 0 1 2-2 2 2 0 0 1 2 2v5m-2 8a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2v-2h2m0-1a2 2 0 0 1-2-2 2 2 0 0 1 2-2h5a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-5Z"></path>
</svg>
        Nextflow Slack
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://nextflow.io/" rel="noopener" target="_blank">
<svg id="Layer_1" version="1.1" viewbox="80 50 350 350" xmlns="http://www.w3.org/2000/svg">
<style type="text/css">
            .st0 {
              fill: "gray";
            }
          </style>
<path class="st0" d="M124.5,171.5c39.4,2.6,71.1,34.3,73.5,73.8h46.1c-2.6-65-54.7-117.2-119.6-119.9V171.5z"></path>
<path class="st0" d="M198.3,255.8c-2.6,39.5-34.3,71.1-73.8,73.5v46.1c65-2.6,117.2-54.7,119.9-119.6H198.3z"></path>
<path class="st0" d="M300.7,245c2.6-39.5,34.3-71.1,73.8-73.5v-46.1c-65,2.6-117.2,54.7-119.9,119.6H300.7z"></path>
<path class="st0" d="M374.5,329.3c-39.4-2.6-71.1-34.3-73.5-73.8h-46.1c2.6,65,54.7,117.2,119.6,119.9V329.3z"></path>
</svg>
        Nextflow Homepage
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://seqera.io/" rel="noopener" target="_blank">
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 28.3.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg id="Layer_1" style="enable-background: new 0 0 500 500" version="1.1" viewbox="80 50 350 350" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px">
<style type="text/css">
            .st0 {
              clip-path: url(#SVGID_00000006699037935518914080000000086571810102047141_);
            }
            .st1 {
              fill: "gray";
            }
          </style>
<g>
<defs>
<rect height="250" id="SVGID_1_" width="250" x="125" y="125"></rect>
</defs>
<clippath id="SVGID_00000183214694142566821210000012389151436317298101_">
<use style="overflow: visible" xlink:href="#SVGID_1_"></use>
</clippath>
<g style="
                clip-path: url(#SVGID_00000183214694142566821210000012389151436317298101_);
              ">
<path class="st1" d="M375,333l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.2-0.9l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7L365,308l-0.6-0.6l-0.6-0.6l-0.6-0.6l-0.6-0.6L362,305
                      l-0.6-0.6l-0.7-0.6l-0.6-0.5l-1.2,0.7l-0.8,0.5l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.9,0.4l-0.9,0.4l-0.9,0.3l-0.9,0.3
                      l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.3l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.2l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0.1
                      l-0.9,0.1l-0.9,0.1l-0.9,0.1l-0.9,0l-0.9,0h-57.5l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.3l0.1,0.3l0.1,0.4l0.1,0.4
                      l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4l-0.1,0.3l-0.2,0.3l-0.2,0.3
                      l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.1l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0H125V375h209.7l0.9,0l0.9,0l0.9,0l0.8-0.1
                      l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3
                      l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7
                      l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8
                      l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0.1-0.8l0-0.9l0-0.9l0-0.8L375,333z"></path>
<path class="st1" d="M375,260.4l-0.1-0.9l-0.1-0.9l-0.1-0.8l-0.1-0.9l-0.1-0.8l-0.1-0.8l-0.1-0.8l-0.2-0.8l-0.2-0.8l-0.2-0.8
                      l-0.2-0.8l-0.2-0.8l-0.2-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.3-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.8l-0.4-0.7
                      l-0.4-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.5-0.7l-0.2-0.2h0h-89.8l59.7,16.4l0.4,0.1l0.4,0.1l0.4,0.1l0.3,0.2l0.3,0.2l0.3,0.2
                      l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.2l0.3,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.2,0.3l0.1,0.4l0.1,0.3
                      l0.1,0.4l0.1,0.4l0.1,0.4l0.1,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l0,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.4l-0.1,0.3l-0.1,0.4
                      l-0.2,0.4l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.2,0.3l-0.3,0.3l-0.3,0.3l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.3,0.2
                      l-0.3,0.2l-0.3,0.2l-0.3,0.2l-0.4,0.2l-0.4,0.1l-0.3,0.1l-0.4,0.1l-0.4,0.1l-0.4,0.1l-0.4,0l-0.4,0l-0.4,0h-82.5h-111H125v32.2
                      h122.8h86.9h0.9l0.9,0l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.9-0.1l0.8-0.1l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.2l0.8-0.3
                      l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.3l0.8-0.4l0.8-0.4l0.2-0.1l0.6-0.3l0.8-0.4l0.8-0.4l0.7-0.4l0.7-0.4l0.7-0.5l0.7-0.5l0.7-0.5
                      l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.5l0.7-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.6-0.6l0.5-0.7l0.5-0.7l0.5-0.7
                      l0.5-0.7l0.5-0.7l0.5-0.7l0.5-0.7l0.4-0.7l0.4-0.7l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.4-0.8l0.3-0.8l0.3-0.8l0.3-0.8l0.3-0.8
                      l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.2-0.8l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.8l0.1-0.9l0.1-0.9l0-0.8l0-0.9l0-0.9
                      L375,260.4z"></path>
<path class="st1" d="M165.3,197.6l-0.9,0l-0.8,0l-0.9,0l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.2,0.1l-0.6,0.3l-0.8,0.4
                      l-0.8,0.4l-0.8,0.4l-0.7,0.4l-0.7,0.5l-0.7,0.5L142,205l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.8l0,0.9l0.1,0.8l0.1,0.8
                      l0.1,0.9l0.1,0.9l0.1,0.8l0.2,0.9l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.2,0.2h89.8l-59.7-16.4l-0.4-0.1l-0.3-0.1
                      l-0.4-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3
                      l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4
                      l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3
                      l0.3-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.4-0.2l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0
                      h0.4h82.5h111H375v-32.3H252.2H165.3z"></path>
<path class="st1" d="M165.3,125l-0.9,0l-0.8,0l-0.9,0.1l-0.9,0.1l-0.8,0.1l-0.9,0.1l-0.8,0.1l-0.8,0.1l-0.8,0.2l-0.8,0.2l-0.8,0.2
                      l-0.8,0.2l-0.8,0.2l-0.8,0.2l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.3l-0.8,0.4l-0.8,0.4l-0.8,0.4l-0.8,0.4
                      l-0.8,0.4l-0.7,0.5l-0.7,0.4l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.5l-0.7,0.6l-0.7,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6
                      l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.6,0.6l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.5,0.7l-0.4,0.7l-0.5,0.7l-0.4,0.7
                      l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.4,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.3,0.8l-0.2,0.8l-0.2,0.8l-0.2,0.8
                      l-0.2,0.8l-0.2,0.8l-0.2,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l-0.1,0.8l-0.1,0.9l0,0.9l0,0.9v0.9v0.9l0,0.9l0,0.8l0.1,0.9l0.1,0.9
                      l0.1,0.8l0.1,0.8l0.1,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.2,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8l0.3,0.8
                      l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.8l0.4,0.7l0.5,0.7l0.4,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.5,0.7l0.6,0.6l0.6,0.6
                      l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.6,0.6l0.7,0.6l0.6,0.5h0l1.1-0.7l0.8-0.5l0.8-0.5l0.8-0.4l0.8-0.4l0.9-0.4l0.9-0.4l0.9-0.4
                      l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.3l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.2l0.9-0.1l0.9-0.1l0.9-0.1l0.9-0.1
                      l0.9-0.1l0.9-0.1l0.9,0l0.9,0l0.9,0h57.5l-59.7-16.4l-0.4-0.1l-0.3-0.1l-0.4-0.1l-0.3-0.1l-0.3-0.2l-0.3-0.2l-0.3-0.2l-0.3-0.2
                      l-0.3-0.2l-0.3-0.2l-0.3-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.2-0.3l-0.1-0.3l-0.1-0.4
                      l-0.1-0.3l-0.1-0.4l-0.1-0.4l-0.1-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.4l0.1-0.3
                      l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.2-0.3l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2l0.3-0.2
                      l0.3-0.2l0.4-0.1l0.3-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4-0.1l0.4,0l0.4,0l0.4,0H375V125H165.3z"></path>
</g>
</g>
</svg>
        Seqera
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="https://github.com/nextflow-io/training" rel="noopener" target="_blank">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"></path>
</svg>
        Training on GitHub
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/nextflow-io/training/edit/master/docs/archive/advanced/grouping.md" rel="edit" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
</a>
<h1 id="grouping-and-splitting"><span class="enumerate-headings-plugin enumerate-heading-plugin">22.</span> Grouping and Splitting<a class="headerlink" href="#grouping-and-splitting" title="Permanent link">¶</a></h1>
<h2 id="grouping-using-submap"><span class="enumerate-headings-plugin enumerate-heading-plugin">22.1</span> Grouping using subMap<a class="headerlink" href="#grouping-using-submap" title="Permanent link">¶</a></h2>
<p>Now that we have a channel that conforms to the <code>tuple val(meta) path(&lt;something&gt;)</code> pattern, we can investigate splitting and grouping patterns.</p>
<p>We'll start with a simple main.nf in the <code>grouping</code> directory</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>grouping
</code></pre></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="w">    </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/samplesheet.csv"</span><span class="o">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">        </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="nl">id:</span><span class="n">row</span><span class="o">.</span><span class="na">id</span><span class="o">,</span><span class="w"> </span><span class="nl">repeat:</span><span class="n">row</span><span class="o">.</span><span class="na">repeat</span><span class="o">,</span><span class="w"> </span><span class="nl">type:</span><span class="n">row</span><span class="o">.</span><span class="na">type</span><span class="o">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">            </span><span class="o">[</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">                </span><span class="n">meta</span><span class="o">,</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">                </span><span class="o">[</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq1</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">),</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq2</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">                </span><span class="o">]</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">            </span><span class="o">]</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">        </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>The first change we're going to make is to correct some repetitive code that we've seen quite a lot already in this workshop. The construction of the meta map from this row stutters quite a lot. We can make use of the <a href="https://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Map.html#subMap(java.util.Collection)"><code>subMap</code></a> method available Maps to quickly return a new map constructed from the subset of an existing map:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">    </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/samplesheet.csv"</span><span class="o">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">        </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="hll"><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'repeat'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">)</span>
</span><a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">            </span><span class="o">[</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">                </span><span class="n">meta</span><span class="o">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">                </span><span class="o">[</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq1</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">),</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq2</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">                </span><span class="o">]</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">            </span><span class="o">]</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">        </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Complete meta map safety</p>
<p>The <code>subMap</code> method will take a collection of keys and construct a <em>new</em> map with just the keys listed in the collection. This method, in combination with the <code>plus</code> or <code>+</code> method for combining maps and resetting values should allow all contraction, expansion and modification of maps safely.</p>
</div>
<div class="admonition exercise">
<p class="admonition-title">Exercise</p>
<p>Can you extend our workflow in an <em>unsafe</em> manner? Use the <code>set</code> operator to name the channel in our workflow above, and then <code>map</code> (the operator) over that without modification. In a separate map operation, try modifying the meta map in a way that is reflected in the first map.</p>
<p>Note that we're trying to do the <em>wrong</em> thing in this example to clarify what the correct approach might be.</p>
<details class="solution">
<summary>Solution</summary>
<p>To ensure that the modification of the map happens first, we introduce a <code>sleep</code> into the first map operation. This <code>sleep</code> emulates a long-running Nextflow process.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/samplesheet.csv"</span><span class="o">)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">        </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'repeat'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">)</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">            </span><span class="o">[</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">                </span><span class="n">meta</span><span class="o">,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">                </span><span class="o">[</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq1</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">),</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq2</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">                </span><span class="o">]</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">            </span><span class="o">]</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">        </span><span class="o">.</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">samples</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">    </span><span class="n">samples</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="mi">10</span><span class="o">;</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="w">        </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">"Should be unmodified: $meta"</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a><span class="w">    </span><span class="n">samples</span>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="w">            </span><span class="n">meta</span><span class="o">.</span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"tumor"</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">"abnormal"</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">"normal"</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="w">            </span><span class="o">[</span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="o">]</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="w">        </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">"Should be modified: $meta"</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
<div class="admonition exercise">
<p class="admonition-title">Exercise</p>
<p>How would you fix the example above to use the safe operators <code>plus</code> and <code>subMap</code> to ensure that the original map remains unmodified?</p>
<details class="solution">
<summary>Solution</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span>
<span class="normal"><a href="#__codelineno-4-12">12</a></span>
<span class="normal"><a href="#__codelineno-4-13">13</a></span>
<span class="normal"><a href="#__codelineno-4-14">14</a></span>
<span class="normal"><a href="#__codelineno-4-15">15</a></span>
<span class="normal"><a href="#__codelineno-4-16">16</a></span>
<span class="normal"><a href="#__codelineno-4-17">17</a></span>
<span class="normal"><a href="#__codelineno-4-18">18</a></span>
<span class="normal"><a href="#__codelineno-4-19">19</a></span>
<span class="normal"><a href="#__codelineno-4-20">20</a></span>
<span class="normal"><a href="#__codelineno-4-21">21</a></span>
<span class="normal"><a href="#__codelineno-4-22">22</a></span>
<span class="normal"><a href="#__codelineno-4-23">23</a></span>
<span class="normal"><a href="#__codelineno-4-24">24</a></span>
<span class="normal"><a href="#__codelineno-4-25">25</a></span>
<span class="normal"><a href="#__codelineno-4-26">26</a></span>
<span class="normal"><a href="#__codelineno-4-27">27</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/samplesheet.csv"</span><span class="o">)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">        </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'repeat'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">            </span><span class="o">[</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">                </span><span class="n">meta</span><span class="o">,</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">                </span><span class="o">[</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq1</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">),</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">                    </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq2</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">                </span><span class="o">]</span>
<a id="__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">            </span><span class="o">]</span>
<a id="__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">        </span><span class="o">.</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">samples</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-4-15" name="__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17"></a><span class="w">    </span><span class="n">samples</span>
<a id="__codelineno-4-18" name="__codelineno-4-18"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">sleep</span><span class="w"> </span><span class="mi">10</span><span class="o">;</span><span class="w"> </span><span class="n">element</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="w">        </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">"Should be unmodified: $meta"</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-4-20" name="__codelineno-4-20"></a>
<a id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="w">    </span><span class="n">samples</span>
<a id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-4-23" name="__codelineno-4-23"></a><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">newmap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="nl">type:</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">type</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"tumor"</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">"abnormal"</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">"normal"</span><span class="o">]</span>
<a id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="w">            </span><span class="o">[</span><span class="n">meta</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">newmap</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="o">]</span>
<a id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="w">        </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">"Should be modified: $meta"</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
<h2 id="passing-maps-through-processes"><span class="enumerate-headings-plugin enumerate-heading-plugin">22.2</span> Passing maps through processes<a class="headerlink" href="#passing-maps-through-processes" title="Permanent link">¶</a></h2>
<p>Let's construct a dummy read mapping process. This is not a bioinformatics workshop, so we can 'cheat' in the interests of time.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span>
<span class="normal"><a href="#__codelineno-5-25">25</a></span>
<span class="normal"><a href="#__codelineno-5-26">26</a></span>
<span class="normal"><a href="#__codelineno-5-27">27</a></span>
<span class="normal"><a href="#__codelineno-5-28">28</a></span>
<span class="normal"><a href="#__codelineno-5-29">29</a></span>
<span class="normal"><a href="#__codelineno-5-30">30</a></span>
<span class="normal"><a href="#__codelineno-5-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">process</span><span class="w"> </span><span class="n">MapReads</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="hll"><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">reads</span><span class="o">)</span>
</span><a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="n">path</span><span class="o">(</span><span class="n">genome</span><span class="o">)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"*.bam"</span><span class="o">)</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="w">    </span><span class="s2">"touch out.bam"</span>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="o">}</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="w">    </span><span class="n">reference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/genome.fasta"</span><span class="o">).</span><span class="na">first</span><span class="o">()</span>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">    </span><span class="n">samples</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/samplesheet.csv"</span><span class="o">)</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">        </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'repeat'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">)</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a><span class="w">            </span><span class="o">[</span>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">              </span><span class="n">meta</span><span class="o">,</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">              </span><span class="o">[</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">                </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq1</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">),</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="w">                </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq2</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<a id="__codelineno-5-25" name="__codelineno-5-25"></a><span class="w">              </span><span class="o">]</span>
<a id="__codelineno-5-26" name="__codelineno-5-26"></a><span class="w">            </span><span class="o">]</span>
<a id="__codelineno-5-27" name="__codelineno-5-27"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-5-28" name="__codelineno-5-28"></a>
<a id="__codelineno-5-29" name="__codelineno-5-29"></a><span class="hll"><span class="w">    </span><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
</span><a id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="w">    </span><span class="n">mapped_reads</span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
<a id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>Let's consider that we might now want to merge the repeats. We'll need to group bams that share the <code>id</code> and <code>type</code> attributes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="hll"><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">bam</span><span class="o">]}</span>
</span><a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="n">mapped_reads</span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</code></pre></div></td></tr></table></div>
<p>This is easy enough, but the <code>groupTuple</code> operator has to wait until all items are emitted from the incoming queue before it is able to reassemble the output queue. If even one read mapping job takes a long time, the processing of all other samples is held up. We need a way of signalling to Nextflow how many items are in a given group so that items can be emitted as early as possible.</p>
<p>By default, the <code>groupTuple</code> operator groups on the first item in the element, which at the moment is a <code>Map</code>. We can turn this map into a special class using the <code>groupKey</code> method, which takes our grouping object as a first parameter and the number of expected elements in the second parameter.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-29">29</a></span>
<span class="normal"><a href="#__codelineno-7-30">30</a></span>
<span class="normal"><a href="#__codelineno-7-31">31</a></span>
<span class="normal"><a href="#__codelineno-7-32">32</a></span>
<span class="normal"><a href="#__codelineno-7-33">33</a></span>
<span class="normal"><a href="#__codelineno-7-34">34</a></span>
<span class="normal"><a href="#__codelineno-7-35">35</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-7-30" name="__codelineno-7-30"></a><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-7-31" name="__codelineno-7-31"></a><span class="hll"><span class="w">        </span><span class="kt">def</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groupKey</span><span class="o">(</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">NUMBER_OF_ITEMS_IN_GROUP</span><span class="o">)</span>
</span><a id="__codelineno-7-32" name="__codelineno-7-32"></a><span class="w">        </span><span class="o">[</span><span class="n">key</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span>
<a id="__codelineno-7-33" name="__codelineno-7-33"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-7-34" name="__codelineno-7-34"></a><span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-7-35" name="__codelineno-7-35"></a><span class="n">mapped_reads</span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</code></pre></div></td></tr></table></div>
<div class="admonition exercise">
<p class="admonition-title">Exercise</p>
<p>How might we modify the upstream channels to the number of repeats into the metamap?</p>
<details class="solution">
<summary>Solution</summary>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span>
<span class="normal"><a href="#__codelineno-8-19">19</a></span>
<span class="normal"><a href="#__codelineno-8-20">20</a></span>
<span class="normal"><a href="#__codelineno-8-21">21</a></span>
<span class="normal"><a href="#__codelineno-8-22">22</a></span>
<span class="normal"><a href="#__codelineno-8-23">23</a></span>
<span class="normal"><a href="#__codelineno-8-24">24</a></span>
<span class="normal"><a href="#__codelineno-8-25">25</a></span>
<span class="normal"><a href="#__codelineno-8-26">26</a></span>
<span class="normal"><a href="#__codelineno-8-27">27</a></span>
<span class="normal"><a href="#__codelineno-8-28">28</a></span>
<span class="normal"><a href="#__codelineno-8-29">29</a></span>
<span class="normal"><a href="#__codelineno-8-30">30</a></span>
<span class="normal"><a href="#__codelineno-8-31">31</a></span>
<span class="normal"><a href="#__codelineno-8-32">32</a></span>
<span class="normal"><a href="#__codelineno-8-33">33</a></span>
<span class="normal"><a href="#__codelineno-8-34">34</a></span>
<span class="normal"><a href="#__codelineno-8-35">35</a></span>
<span class="normal"><a href="#__codelineno-8-36">36</a></span>
<span class="normal"><a href="#__codelineno-8-37">37</a></span>
<span class="normal"><a href="#__codelineno-8-38">38</a></span>
<span class="normal"><a href="#__codelineno-8-39">39</a></span>
<span class="normal"><a href="#__codelineno-8-40">40</a></span>
<span class="normal"><a href="#__codelineno-8-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="w">    </span><span class="n">reference</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/genome.fasta"</span><span class="o">).</span><span class="na">first</span><span class="o">()</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="w">    </span><span class="n">samples</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/samplesheet.csv"</span><span class="o">)</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="w">        </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-8-19" name="__codelineno-8-19"></a><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'repeat'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">)</span>
<a id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="w">            </span><span class="o">[</span>
<a id="__codelineno-8-21" name="__codelineno-8-21"></a><span class="w">              </span><span class="n">meta</span><span class="o">,</span>
<a id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="w">              </span><span class="o">[</span>
<a id="__codelineno-8-23" name="__codelineno-8-23"></a><span class="w">                </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq1</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">),</span>
<a id="__codelineno-8-24" name="__codelineno-8-24"></a><span class="w">                </span><span class="n">file</span><span class="o">(</span><span class="n">row</span><span class="o">.</span><span class="na">fastq2</span><span class="o">,</span><span class="w"> </span><span class="nl">checkIfExists:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<a id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="w">              </span><span class="o">]</span>
<a id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="w">            </span><span class="o">]</span>
<a id="__codelineno-8-27" name="__codelineno-8-27"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-8-28" name="__codelineno-8-28"></a><span class="hll"><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">repeat</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
</span><a id="__codelineno-8-29" name="__codelineno-8-29"></a><span class="hll"><span class="w">        </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
</span><a id="__codelineno-8-30" name="__codelineno-8-30"></a><span class="hll"><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">repeats</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">meta</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="nl">repeatcount:</span><span class="n">repeats</span><span class="o">.</span><span class="na">size</span><span class="o">()],</span><span class="w"> </span><span class="n">repeats</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
</span><a id="__codelineno-8-31" name="__codelineno-8-31"></a><span class="hll"><span class="w">        </span><span class="o">.</span><span class="na">transpose</span><span class="o">()</span>
</span><a id="__codelineno-8-32" name="__codelineno-8-32"></a><span class="hll"><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">repeat</span><span class="o">,</span><span class="w"> </span><span class="n">reads</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">meta</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="nl">repeat:</span><span class="n">repeat</span><span class="o">],</span><span class="w"> </span><span class="n">reads</span><span class="o">]}</span>
</span><a id="__codelineno-8-33" name="__codelineno-8-33"></a>
<a id="__codelineno-8-34" name="__codelineno-8-34"></a><span class="w">    </span><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-8-35" name="__codelineno-8-35"></a><span class="w">        </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-8-36" name="__codelineno-8-36"></a><span class="w">            </span><span class="kt">def</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groupKey</span><span class="o">(</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">repeatcount</span><span class="o">)</span>
<a id="__codelineno-8-37" name="__codelineno-8-37"></a><span class="w">            </span><span class="o">[</span><span class="n">key</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span>
<a id="__codelineno-8-38" name="__codelineno-8-38"></a><span class="w">        </span><span class="o">}</span>
<a id="__codelineno-8-39" name="__codelineno-8-39"></a><span class="w">        </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-8-40" name="__codelineno-8-40"></a><span class="w">    </span><span class="n">mapped_reads</span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
<a id="__codelineno-8-41" name="__codelineno-8-41"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
</details>
</div>
<p>Now that we have our repeats together in an output channel, we can combine them using "advanced bioinformatics":</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-13">13</a></span>
<span class="normal"><a href="#__codelineno-9-14">14</a></span>
<span class="normal"><a href="#__codelineno-9-15">15</a></span>
<span class="normal"><a href="#__codelineno-9-16">16</a></span>
<span class="normal"><a href="#__codelineno-9-17">17</a></span>
<span class="normal"><a href="#__codelineno-9-18">18</a></span>
<span class="normal"><a href="#__codelineno-9-19">19</a></span>
<span class="normal"><a href="#__codelineno-9-20">20</a></span>
<span class="normal"><a href="#__codelineno-9-21">21</a></span>
<span class="normal"><a href="#__codelineno-9-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="n">process</span><span class="w"> </span><span class="n">CombineBams</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"input/in_*_.bam"</span><span class="o">)</span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"combined.bam"</span><span class="o">)</span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">    </span><span class="s2">"cat input/*.bam &gt; combined.bam"</span>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>In our workflow:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-45">45</a></span>
<span class="normal"><a href="#__codelineno-10-46">46</a></span>
<span class="normal"><a href="#__codelineno-10-47">47</a></span>
<span class="normal"><a href="#__codelineno-10-48">48</a></span>
<span class="normal"><a href="#__codelineno-10-49">49</a></span>
<span class="normal"><a href="#__codelineno-10-50">50</a></span>
<span class="normal"><a href="#__codelineno-10-51">51</a></span>
<span class="normal"><a href="#__codelineno-10-52">52</a></span>
<span class="normal"><a href="#__codelineno-10-53">53</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-45" name="__codelineno-10-45"></a><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-10-46" name="__codelineno-10-46"></a><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-10-47" name="__codelineno-10-47"></a><span class="hll"><span class="w">        </span><span class="kt">def</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groupKey</span><span class="o">(</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">repeatcount</span><span class="o">)</span>
</span><a id="__codelineno-10-48" name="__codelineno-10-48"></a><span class="w">        </span><span class="o">[</span><span class="n">key</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span>
<a id="__codelineno-10-49" name="__codelineno-10-49"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-10-50" name="__codelineno-10-50"></a><span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-10-51" name="__codelineno-10-51"></a>
<a id="__codelineno-10-52" name="__codelineno-10-52"></a><span class="n">CombineBams</span><span class="o">(</span><span class="n">mapped_reads</span><span class="o">)</span>
<a id="__codelineno-10-53" name="__codelineno-10-53"></a><span class="w">  </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="fanning-out-over-intervals"><span class="enumerate-headings-plugin enumerate-heading-plugin">22.3</span> Fanning out over intervals<a class="headerlink" href="#fanning-out-over-intervals" title="Permanent link">¶</a></h2>
<p>The previous exercise demonstrated the fan-in approach using <code>groupTuple</code> and <code>groupKey</code>, but we might want to fan out our processes. An example might be computing over some intervals - genotyping over intervals, for example.</p>
<p>We can take an existing bed file, for example and turn it into a channel of Maps.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-26">26</a></span>
<span class="normal"><a href="#__codelineno-11-27">27</a></span>
<span class="normal"><a href="#__codelineno-11-28">28</a></span>
<span class="normal"><a href="#__codelineno-11-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-26" name="__codelineno-11-26"></a><span class="n">intervals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s2">"data/intervals.bed"</span><span class="o">)</span>
<a id="__codelineno-11-27" name="__codelineno-11-27"></a><span class="w">    </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="nl">header:</span><span class="w"> </span><span class="o">[</span><span class="s1">'chr'</span><span class="o">,</span><span class="w"> </span><span class="s1">'start'</span><span class="o">,</span><span class="w"> </span><span class="s1">'stop'</span><span class="o">,</span><span class="w"> </span><span class="s1">'name'</span><span class="o">],</span><span class="w"> </span><span class="nl">sep:</span><span class="w"> </span><span class="s1">'\t'</span><span class="o">)</span>
<a id="__codelineno-11-28" name="__codelineno-11-28"></a><span class="w">    </span><span class="o">.</span><span class="na">collectFile</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="s2">"${entry.name}.bed"</span><span class="o">,</span><span class="w"> </span><span class="n">entry</span><span class="o">*.</span><span class="na">value</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="s2">"\t"</span><span class="o">)]</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-11-29" name="__codelineno-11-29"></a><span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</code></pre></div></td></tr></table></div>
<p>Given a dummy genotyping process:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-24">24</a></span>
<span class="normal"><a href="#__codelineno-12-25">25</a></span>
<span class="normal"><a href="#__codelineno-12-26">26</a></span>
<span class="normal"><a href="#__codelineno-12-27">27</a></span>
<span class="normal"><a href="#__codelineno-12-28">28</a></span>
<span class="normal"><a href="#__codelineno-12-29">29</a></span>
<span class="normal"><a href="#__codelineno-12-30">30</a></span>
<span class="normal"><a href="#__codelineno-12-31">31</a></span>
<span class="normal"><a href="#__codelineno-12-32">32</a></span>
<span class="normal"><a href="#__codelineno-12-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-24" name="__codelineno-12-24"></a><span class="n">process</span><span class="w"> </span><span class="n">GenotypeOnInterval</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-12-25" name="__codelineno-12-25"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-12-26" name="__codelineno-12-26"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">bam</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="n">bed</span><span class="o">)</span>
<a id="__codelineno-12-27" name="__codelineno-12-27"></a>
<a id="__codelineno-12-28" name="__codelineno-12-28"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-12-29" name="__codelineno-12-29"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"genotyped.vcf"</span><span class="o">)</span>
<a id="__codelineno-12-30" name="__codelineno-12-30"></a>
<a id="__codelineno-12-31" name="__codelineno-12-31"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-12-32" name="__codelineno-12-32"></a><span class="w">    </span><span class="s2">"cat $bam $bed &gt; genotyped.vcf"</span>
<a id="__codelineno-12-33" name="__codelineno-12-33"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>We can use the <code>combine</code> operator to emit a new channel where each combined bam is attached to each bed file. These can then be piped into the genotyping process:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-60">60</a></span>
<span class="normal"><a href="#__codelineno-13-61">61</a></span>
<span class="normal"><a href="#__codelineno-13-62">62</a></span>
<span class="normal"><a href="#__codelineno-13-63">63</a></span>
<span class="normal"><a href="#__codelineno-13-64">64</a></span>
<span class="normal"><a href="#__codelineno-13-65">65</a></span>
<span class="normal"><a href="#__codelineno-13-66">66</a></span>
<span class="normal"><a href="#__codelineno-13-67">67</a></span>
<span class="normal"><a href="#__codelineno-13-68">68</a></span>
<span class="normal"><a href="#__codelineno-13-69">69</a></span>
<span class="normal"><a href="#__codelineno-13-70">70</a></span>
<span class="normal"><a href="#__codelineno-13-71">71</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-60" name="__codelineno-13-60"></a><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-13-61" name="__codelineno-13-61"></a><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-13-62" name="__codelineno-13-62"></a><span class="w">        </span><span class="kt">def</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groupKey</span><span class="o">(</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">repeatcount</span><span class="o">)</span>
<a id="__codelineno-13-63" name="__codelineno-13-63"></a><span class="w">        </span><span class="o">[</span><span class="n">key</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span>
<a id="__codelineno-13-64" name="__codelineno-13-64"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-13-65" name="__codelineno-13-65"></a><span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-13-66" name="__codelineno-13-66"></a>
<a id="__codelineno-13-67" name="__codelineno-13-67"></a><span class="n">combined_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CombineBams</span><span class="o">(</span><span class="n">mapped_reads</span><span class="o">)</span>
<a id="__codelineno-13-68" name="__codelineno-13-68"></a><span class="hll"><span class="w">    </span><span class="o">.</span><span class="na">combine</span><span class="o">(</span><span class="w"> </span><span class="n">intervals</span><span class="w"> </span><span class="o">)</span>
</span><a id="__codelineno-13-69" name="__codelineno-13-69"></a>
<a id="__codelineno-13-70" name="__codelineno-13-70"></a><span class="n">genotyped_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenotypeOnInterval</span><span class="o">(</span><span class="n">combined_bams</span><span class="o">)</span>
<a id="__codelineno-13-71" name="__codelineno-13-71"></a><span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</code></pre></div></td></tr></table></div>
<p>Finally, we can combine these genotyped bams back using <code>groupTuple</code> and another bam merge process. We construct our "merge" process that will combine the bam files from multiple intervals:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-35">35</a></span>
<span class="normal"><a href="#__codelineno-14-36">36</a></span>
<span class="normal"><a href="#__codelineno-14-37">37</a></span>
<span class="normal"><a href="#__codelineno-14-38">38</a></span>
<span class="normal"><a href="#__codelineno-14-39">39</a></span>
<span class="normal"><a href="#__codelineno-14-40">40</a></span>
<span class="normal"><a href="#__codelineno-14-41">41</a></span>
<span class="normal"><a href="#__codelineno-14-42">42</a></span>
<span class="normal"><a href="#__codelineno-14-43">43</a></span>
<span class="normal"><a href="#__codelineno-14-44">44</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-35" name="__codelineno-14-35"></a><span class="n">process</span><span class="w"> </span><span class="n">MergeGenotyped</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-14-36" name="__codelineno-14-36"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-14-37" name="__codelineno-14-37"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"input/in_*_.vcf"</span><span class="o">)</span>
<a id="__codelineno-14-38" name="__codelineno-14-38"></a>
<a id="__codelineno-14-39" name="__codelineno-14-39"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-14-40" name="__codelineno-14-40"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"merged.genotyped.vcf"</span><span class="o">)</span>
<a id="__codelineno-14-41" name="__codelineno-14-41"></a>
<a id="__codelineno-14-42" name="__codelineno-14-42"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-14-43" name="__codelineno-14-43"></a><span class="w">    </span><span class="s2">"cat input/*.vcf &gt; merged.genotyped.vcf"</span>
<a id="__codelineno-14-44" name="__codelineno-14-44"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>We might be tempted to pipe the output of <code>GenotypeOnInterval</code> directly into groupTuple, but the <code>meta</code> object we are passing down is still the <code>groupKey</code> we created earlier:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-71">71</a></span>
<span class="normal"><a href="#__codelineno-15-72">72</a></span>
<span class="normal"><a href="#__codelineno-15-73">73</a></span>
<span class="normal"><a href="#__codelineno-15-74">74</a></span>
<span class="normal"><a href="#__codelineno-15-75">75</a></span>
<span class="normal"><a href="#__codelineno-15-76">76</a></span>
<span class="normal"><a href="#__codelineno-15-77">77</a></span>
<span class="normal"><a href="#__codelineno-15-78">78</a></span>
<span class="normal"><a href="#__codelineno-15-79">79</a></span>
<span class="normal"><a href="#__codelineno-15-80">80</a></span>
<span class="normal"><a href="#__codelineno-15-81">81</a></span>
<span class="normal"><a href="#__codelineno-15-82">82</a></span>
<span class="normal"><a href="#__codelineno-15-83">83</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-71" name="__codelineno-15-71"></a><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-15-72" name="__codelineno-15-72"></a><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-15-73" name="__codelineno-15-73"></a><span class="w">        </span><span class="kt">def</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groupKey</span><span class="o">(</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">repeatcount</span><span class="o">)</span>
<a id="__codelineno-15-74" name="__codelineno-15-74"></a><span class="w">        </span><span class="o">[</span><span class="n">key</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span>
<a id="__codelineno-15-75" name="__codelineno-15-75"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-15-76" name="__codelineno-15-76"></a><span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-15-77" name="__codelineno-15-77"></a>
<a id="__codelineno-15-78" name="__codelineno-15-78"></a><span class="n">combined_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CombineBams</span><span class="o">(</span><span class="n">mapped_reads</span><span class="o">)</span>
<a id="__codelineno-15-79" name="__codelineno-15-79"></a><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-15-80" name="__codelineno-15-80"></a><span class="w">    </span><span class="o">.</span><span class="na">combine</span><span class="o">(</span><span class="w"> </span><span class="n">intervals</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-15-81" name="__codelineno-15-81"></a>
<a id="__codelineno-15-82" name="__codelineno-15-82"></a><span class="n">genotyped_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenotypeOnInterval</span><span class="o">(</span><span class="n">combined_bams</span><span class="o">)</span>
<a id="__codelineno-15-83" name="__codelineno-15-83"></a><span class="hll"><span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bamfile</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">"Meta is of ${meta.getClass()}"</span><span class="w"> </span><span class="o">}</span>
</span></code></pre></div></td></tr></table></div>
<p>To ensure that grouping is performed only on the relevant elements, we can unwrap the <code>groupKey</code> to return the underlying <code>Map</code> using the <code>getGroupTarget()</code> method available on groupKeys. This allows the <code>groupTuple</code> operator to group by just the keys present in the map, similar to how <code>subMap</code> works. This approach ensures that downstream grouping and merging steps operate on the intended sample attributes.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-71">71</a></span>
<span class="normal"><a href="#__codelineno-16-72">72</a></span>
<span class="normal"><a href="#__codelineno-16-73">73</a></span>
<span class="normal"><a href="#__codelineno-16-74">74</a></span>
<span class="normal"><a href="#__codelineno-16-75">75</a></span>
<span class="normal"><a href="#__codelineno-16-76">76</a></span>
<span class="normal"><a href="#__codelineno-16-77">77</a></span>
<span class="normal"><a href="#__codelineno-16-78">78</a></span>
<span class="normal"><a href="#__codelineno-16-79">79</a></span>
<span class="normal"><a href="#__codelineno-16-80">80</a></span>
<span class="normal"><a href="#__codelineno-16-81">81</a></span>
<span class="normal"><a href="#__codelineno-16-82">82</a></span>
<span class="normal"><a href="#__codelineno-16-83">83</a></span>
<span class="normal"><a href="#__codelineno-16-84">84</a></span>
<span class="normal"><a href="#__codelineno-16-85">85</a></span>
<span class="normal"><a href="#__codelineno-16-86">86</a></span>
<span class="normal"><a href="#__codelineno-16-87">87</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-71" name="__codelineno-16-71"></a><span class="n">mapped_reads</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MapReads</span><span class="o">(</span><span class="w"> </span><span class="n">samples</span><span class="o">,</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-16-72" name="__codelineno-16-72"></a><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span>
<a id="__codelineno-16-73" name="__codelineno-16-73"></a><span class="w">        </span><span class="kt">def</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">groupKey</span><span class="o">(</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="na">repeatcount</span><span class="o">)</span>
<a id="__codelineno-16-74" name="__codelineno-16-74"></a><span class="w">        </span><span class="o">[</span><span class="n">key</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span>
<a id="__codelineno-16-75" name="__codelineno-16-75"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-16-76" name="__codelineno-16-76"></a><span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-16-77" name="__codelineno-16-77"></a>
<a id="__codelineno-16-78" name="__codelineno-16-78"></a><span class="n">combined_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CombineBams</span><span class="o">(</span><span class="n">mapped_reads</span><span class="o">)</span>
<a id="__codelineno-16-79" name="__codelineno-16-79"></a><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">bam</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">meta</span><span class="o">.</span><span class="na">subMap</span><span class="o">(</span><span class="s1">'id'</span><span class="o">,</span><span class="w"> </span><span class="s1">'type'</span><span class="o">),</span><span class="w"> </span><span class="n">bam</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
<a id="__codelineno-16-80" name="__codelineno-16-80"></a><span class="w">    </span><span class="o">.</span><span class="na">combine</span><span class="o">(</span><span class="w"> </span><span class="n">intervals</span><span class="w"> </span><span class="o">)</span>
<a id="__codelineno-16-81" name="__codelineno-16-81"></a>
<a id="__codelineno-16-82" name="__codelineno-16-82"></a><span class="n">genotyped_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GenotypeOnInterval</span><span class="o">(</span><span class="n">combined_bams</span><span class="o">)</span>
<a id="__codelineno-16-83" name="__codelineno-16-83"></a><span class="hll"><span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">groupKey</span><span class="o">,</span><span class="w"> </span><span class="n">bamfile</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">groupKey</span><span class="o">.</span><span class="na">getGroupTarget</span><span class="o">(),</span><span class="w"> </span><span class="n">bamfile</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
</span><a id="__codelineno-16-84" name="__codelineno-16-84"></a><span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<a id="__codelineno-16-85" name="__codelineno-16-85"></a>
<a id="__codelineno-16-86" name="__codelineno-16-86"></a><span class="n">merged_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MergeGenotyped</span><span class="o">(</span><span class="n">genotyped_bams</span><span class="o">)</span>
<a id="__codelineno-16-87" name="__codelineno-16-87"></a><span class="n">merged_bams</span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</code></pre></div></td></tr></table></div>
<h2 id="publishing-the-bams"><span class="enumerate-headings-plugin enumerate-heading-plugin">22.4</span> Publishing the bams<a class="headerlink" href="#publishing-the-bams" title="Permanent link">¶</a></h2>
<p>This will return us six bam files - a tumor and normal pair for each of the three samples:</p>
<div class="highlight"><span class="filename">Final channel output</span><pre><span></span><code><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="go">[[id:sampleB, type:normal], merged.genotyped.vcf]</span>
<a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="go">[[id:sampleB, type:tumor], merged.genotyped.vcf]</span>
<a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="go">[[id:sampleA, type:normal], merged.genotyped.vcf]</span>
<a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="go">[[id:sampleA, type:tumor], merged.genotyped.vcf]</span>
<a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="go">[[id:sampleC, type:normal], merged.genotyped.vcf]</span>
<a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="go">[[id:sampleC, type:tumor], merged.genotyped.vcf]</span>
</code></pre></div>
<p>If we would like to save the output of our <code>MergeGenotyped</code> process, we can "publish" the outputs of a process using the <code>publishDir</code> directive. Try modifying the <code>MergeGenotyped</code> process to include the directive:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-35">35</a></span>
<span class="normal"><a href="#__codelineno-18-36">36</a></span>
<span class="normal"><a href="#__codelineno-18-37">37</a></span>
<span class="normal"><a href="#__codelineno-18-38">38</a></span>
<span class="normal"><a href="#__codelineno-18-39">39</a></span>
<span class="normal"><a href="#__codelineno-18-40">40</a></span>
<span class="normal"><a href="#__codelineno-18-41">41</a></span>
<span class="normal"><a href="#__codelineno-18-42">42</a></span>
<span class="normal"><a href="#__codelineno-18-43">43</a></span>
<span class="normal"><a href="#__codelineno-18-44">44</a></span>
<span class="normal"><a href="#__codelineno-18-45">45</a></span>
<span class="normal"><a href="#__codelineno-18-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-35" name="__codelineno-18-35"></a><span class="n">process</span><span class="w"> </span><span class="n">MergeGenotyped</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-18-36" name="__codelineno-18-36"></a><span class="hll"><span class="w">    </span><span class="n">publishDir</span><span class="w"> </span><span class="s1">'results/genotyped'</span>
</span><a id="__codelineno-18-37" name="__codelineno-18-37"></a>
<a id="__codelineno-18-38" name="__codelineno-18-38"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-18-39" name="__codelineno-18-39"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"input/in_*_.vcf"</span><span class="o">)</span>
<a id="__codelineno-18-40" name="__codelineno-18-40"></a>
<a id="__codelineno-18-41" name="__codelineno-18-41"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-18-42" name="__codelineno-18-42"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"merged.genotyped.vcf"</span><span class="o">)</span>
<a id="__codelineno-18-43" name="__codelineno-18-43"></a>
<a id="__codelineno-18-44" name="__codelineno-18-44"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-18-45" name="__codelineno-18-45"></a><span class="w">    </span><span class="s2">"cat input/*.vcf &gt; merged.genotyped.vcf"</span>
<a id="__codelineno-18-46" name="__codelineno-18-46"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>This will publish all of the files in the <code>output</code> block of this process to the <code>results/genotyped</code> directory.</p>
<div class="admonition tip">
<p class="admonition-title">Workflow outputs</p>
<p>As of Nextflow 24.04 you can also manage result publication at the <strong>workflow</strong> level using the new <code>output { }</code> block. This allows you to publish files by pushing them from a channel instead of a process, similar to the channel operations we have been exploring in this workshop.</p>
<p>See the <a href="https://www.nextflow.io/docs/latest/workflow.html#workflow-outputs">Nextflow documentation</a> for a full description.</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">nextflow</span><span class="o">.</span><span class="na">preview</span><span class="o">.</span><span class="na">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>
<a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="n">workflow</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="nl">main:</span>
<a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">    </span><span class="n">merged_bams</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MergeGenotyped</span><span class="o">(</span><span class="n">genotyped_bams</span><span class="o">)</span>
<a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>
<a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">    </span><span class="nl">publish:</span>
<a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">    </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">merged_bams</span>
<a href="#__codelineno-19-9" id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="o">}</span>
<a href="#__codelineno-19-10" id="__codelineno-19-10" name="__codelineno-19-10"></a>
<a href="#__codelineno-19-11" id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="n">output</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-19-12" id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">    </span><span class="n">results</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-19-13" id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">        </span><span class="n">path</span><span class="w"> </span><span class="s1">'genotyped'</span>
<a href="#__codelineno-19-14" id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">    </span><span class="o">}</span>
<a href="#__codelineno-19-15" id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="o">}</span>
</code></pre></div>
</div>
<div class="admonition exercise">
<p class="admonition-title">Exercise</p>
<p>Inspect the contents of the <code>results</code> directory. Does this match what you were expecting? What is missing here?</p>
<p>Can you modify the <code>MergeGenotyped</code> process to ensure we are capturing all of the expected output files?</p>
<details class="solution">
<summary>Solution</summary>
<p>One solution might be to modify the <code>script</code> block to ensure that each file has a unique name:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-35">35</a></span>
<span class="normal"><a href="#__codelineno-20-36">36</a></span>
<span class="normal"><a href="#__codelineno-20-37">37</a></span>
<span class="normal"><a href="#__codelineno-20-38">38</a></span>
<span class="normal"><a href="#__codelineno-20-39">39</a></span>
<span class="normal"><a href="#__codelineno-20-40">40</a></span>
<span class="normal"><a href="#__codelineno-20-41">41</a></span>
<span class="normal"><a href="#__codelineno-20-42">42</a></span>
<span class="normal"><a href="#__codelineno-20-43">43</a></span>
<span class="normal"><a href="#__codelineno-20-44">44</a></span>
<span class="normal"><a href="#__codelineno-20-45">45</a></span>
<span class="normal"><a href="#__codelineno-20-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-35" name="__codelineno-20-35"></a><span class="n">process</span><span class="w"> </span><span class="n">MergeGenotyped</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-20-36" name="__codelineno-20-36"></a><span class="w">    </span><span class="n">publishDir</span><span class="w"> </span><span class="s1">'results/genotyped'</span>
<a id="__codelineno-20-37" name="__codelineno-20-37"></a>
<a id="__codelineno-20-38" name="__codelineno-20-38"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-20-39" name="__codelineno-20-39"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"input/in_*_.vcf"</span><span class="o">)</span>
<a id="__codelineno-20-40" name="__codelineno-20-40"></a>
<a id="__codelineno-20-41" name="__codelineno-20-41"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-20-42" name="__codelineno-20-42"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"*.vcf"</span><span class="o">)</span>
<a id="__codelineno-20-43" name="__codelineno-20-43"></a>
<a id="__codelineno-20-44" name="__codelineno-20-44"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-20-45" name="__codelineno-20-45"></a><span class="hll"><span class="w">    </span><span class="s2">"cat input/*.vcf &gt; ${meta.id}.${meta.type}.genotyped.vcf"</span>
</span><a id="__codelineno-20-46" name="__codelineno-20-46"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>Another option might be to use the <code>saveAs</code> argument to the <code>publishDir</code> directive:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-35">35</a></span>
<span class="normal"><a href="#__codelineno-21-36">36</a></span>
<span class="normal"><a href="#__codelineno-21-37">37</a></span>
<span class="normal"><a href="#__codelineno-21-38">38</a></span>
<span class="normal"><a href="#__codelineno-21-39">39</a></span>
<span class="normal"><a href="#__codelineno-21-40">40</a></span>
<span class="normal"><a href="#__codelineno-21-41">41</a></span>
<span class="normal"><a href="#__codelineno-21-42">42</a></span>
<span class="normal"><a href="#__codelineno-21-43">43</a></span>
<span class="normal"><a href="#__codelineno-21-44">44</a></span>
<span class="normal"><a href="#__codelineno-21-45">45</a></span>
<span class="normal"><a href="#__codelineno-21-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-35" name="__codelineno-21-35"></a><span class="n">process</span><span class="w"> </span><span class="n">MergeGenotyped</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-21-36" name="__codelineno-21-36"></a><span class="hll"><span class="w">    </span><span class="n">publishDir</span><span class="w"> </span><span class="s1">'results/genotyped'</span><span class="o">,</span><span class="w"> </span><span class="nl">saveAs:</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">"${meta.id}.${meta.type}.genotyped.vcf"</span><span class="w"> </span><span class="o">}</span>
</span><a id="__codelineno-21-37" name="__codelineno-21-37"></a>
<a id="__codelineno-21-38" name="__codelineno-21-38"></a><span class="w">    </span><span class="nl">input:</span>
<a id="__codelineno-21-39" name="__codelineno-21-39"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"input/in_*_.vcf"</span><span class="o">)</span>
<a id="__codelineno-21-40" name="__codelineno-21-40"></a>
<a id="__codelineno-21-41" name="__codelineno-21-41"></a><span class="w">    </span><span class="nl">output:</span>
<a id="__codelineno-21-42" name="__codelineno-21-42"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">meta</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">"merged.genotyped.vcf"</span><span class="o">)</span>
<a id="__codelineno-21-43" name="__codelineno-21-43"></a>
<a id="__codelineno-21-44" name="__codelineno-21-44"></a><span class="w">    </span><span class="nl">script:</span>
<a id="__codelineno-21-45" name="__codelineno-21-45"></a><span class="w">    </span><span class="s2">"cat input/*.vcf &gt; merged.genotyped.vcf"</span>
<a id="__codelineno-21-46" name="__codelineno-21-46"></a><span class="o">}</span>
</code></pre></div></td></tr></table></div>
<p>If you are using the new output syntax described above, you can edit the filename using the <code>path</code> directive:</p>
<div class="highlight"><pre><span></span><code><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">output</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">    </span><span class="n">results</span><span class="w"> </span><span class="o">{</span>
<a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">        </span><span class="n">path</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">meta</span><span class="o">,</span><span class="w"> </span><span class="n">vcf</span><span class="w"> </span><span class="o">-&gt;</span>
<a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">            </span><span class="s2">"genotyped/${meta.id}.${meta.type}.genotyped.vcf"</span>
<a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">        </span><span class="o">}</span>
<a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">    </span><span class="o">}</span>
<a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="o">}</span>
</code></pre></div>
</details>
</div>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Metadata Propagation" class="md-footer__link md-footer__link--prev" href="../metadata/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Metadata Propagation
              </div>
</div>
</a>
<a aria-label="Next: Groovy Imports" class="md-footer__link md-footer__link--next" href="../groovy/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Groovy Imports
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div>
    Copyright © 2020-2025,
    <a href="https://seqera.io" rel="noopener" target="_blank">Seqera</a>.
  </div>
<div class="footer_cc_link">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg">
<!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.-->
<path d="m245.83 214.87-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13 0-33.22 14.61-33.22 43.84 0 23.57 9.21 43.84 33.22 43.84 14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6 0-73.96-10.32-73.96-77.05 0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05 0-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14 0-33.22 14.61-33.22 43.84 0 23.55 9.23 43.84 33.22 43.84 14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69 0-73.96-9.87-73.96-77.05 0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248 129.93 0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81 0-105.42 85.43-203.27 203.72-203.27 112.53 0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"></path>
</svg>
<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" rel="noopener" target="_blank" title="Creative Commons CC BY-NC-ND 4.0">
      Creative Commons BY-NC-ND 4.0</a>.
  </div>
   Made with
  <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
    Material for MkDocs
  </a>
</div>
<div class="md-social">
<a class="footer_seqera_logo" href="https://seqera.io" rel="noopener" target="_blank">
<img src="/assets/img/seqera_logo_white.png">
</img></a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4><span class="enumerate-headings-plugin enumerate-heading-plugin">22.4.0.1</span> Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our training materials better. Find out more on <a href="https://seqera.io/privacy-policy/#cookies" rel="noopener" target="_blank">how we use cookies</a>.</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="analytics" type="checkbox"/>
<span class="task-list-indicator"></span>
      Google Analytics
    </label>
</li>
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="github" type="checkbox"/>
<span class="task-list-indicator"></span>
      GitHub
    </label>
</li>
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="posthog" type="checkbox"/>
<span class="task-list-indicator"></span>
      PostHog Analytics
    </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
<script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "content.code.annotate", "content.code.copy", "navigation.footer", "navigation.instant", "navigation.top", "navigation.tracking", "search.share", "toc.follow"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "provider": "mike"}}</script>
<script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
<script src="../../../assets/javascripts/posthog.js"></script>
</body>
</html>